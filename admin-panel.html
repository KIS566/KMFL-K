<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Kishan's Code Vault</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon: #00ffc6;
            --panel: rgba(0, 0, 0, 0.65);
            --bg-dark: #0a0a0a;
            --danger: #ff5555;
            --warning: #ffa500;
            --success: #00ff00;
        }
        
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            color: #e6f1f0;
            font-family: 'Share Tech Mono', monospace;
            background: var(--bg-dark);
        }
        
        .bg-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
            opacity: 0.3;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 20px;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            border-bottom: 1px solid var(--neon);
        }
        
        .logo {
            color: var(--neon);
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .back-btn {
            background: transparent;
            border: 1px solid var(--neon);
            color: var(--neon);
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            background: rgba(0, 255, 198, 0.15);
        }
        
        .wrap {
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
        }
        
        .login-panel {
            background: var(--panel);
            padding: 30px;
            border-radius: 12px;
            backdrop-filter: blur(6px);
            border: 1px solid var(--neon);
            max-width: 400px;
            margin: 50px auto;
            text-align: center;
        }
        
        .admin-panel {
            background: var(--panel);
            padding: 20px;
            border-radius: 12px;
            backdrop-filter: blur(6px);
            border: 1px solid var(--neon);
            margin-bottom: 20px;
        }
        
        .panel-title {
            color: var(--neon);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            color: var(--neon);
        }
        
        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 10px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--neon);
            border-radius: 6px;
            color: var(--neon);
            font-family: 'Share Tech Mono', monospace;
        }
        
        .form-textarea {
            height: 150px;
            resize: vertical;
        }
        
        .btn {
            background: transparent;
            border: 1px solid var(--neon);
            color: var(--neon);
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Share Tech Mono', monospace;
            margin: 5px;
        }
        
        .btn-primary {
            background: var(--neon);
            color: #000;
            font-weight: bold;
        }
        
        .btn-danger {
            border-color: var(--danger);
            color: var(--danger);
        }
        
        .btn-warning {
            border-color: var(--warning);
            color: var(--warning);
        }
        
        .btn-success {
            border-color: var(--success);
            color: var(--success);
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .btn-primary:hover {
            background: #00e6b3;
        }
        
        .btn-danger:hover {
            background: rgba(255, 85, 85, 0.15);
        }
        
        .btn-warning:hover {
            background: rgba(255, 165, 0, 0.15);
        }
        
        .btn-success:hover {
            background: rgba(0, 255, 0, 0.15);
        }
        
        .codes-list {
            margin-top: 20px;
        }
        
        .code-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid rgba(0, 255, 198, 0.2);
            transition: all 0.3s ease;
        }
        
        .code-item:hover {
            border-color: var(--neon);
            transform: translateY(-2px);
        }
        
        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .code-title {
            color: var(--neon);
            margin: 0;
        }
        
        .code-category {
            background: rgba(0, 255, 198, 0.2);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
        }
        
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--neon);
            color: #000;
            padding: 10px 15px;
            border-radius: 4px;
            font-weight: bold;
            display: none;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0, 255, 198, 0.3);
        }
        
        .hidden {
            display: none;
        }
        
        .security-info {
            background: rgba(255, 165, 0, 0.1);
            border: 1px solid var(--warning);
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
        }
        
        .security-icon {
            font-size: 2rem;
            color: var(--warning);
            margin-bottom: 10px;
        }
        
        .logout-btn {
            position: absolute;
            top: 20px;
            right: 20px;
        }
        
        .attempts-warning {
            color: var(--warning);
            font-size: 0.8rem;
            margin-top: 10px;
        }
        
        .locked-message {
            text-align: center;
            padding: 30px;
            color: var(--warning);
        }
        
        .lock-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .countdown {
            font-size: 1.2rem;
            color: var(--neon);
            font-weight: bold;
            margin: 10px 0;
        }
        
        .auto-save-indicator {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--success);
            color: #000;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            display: none;
            z-index: 1000;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .json-preview {
            background: #000;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            max-height: 200px;
            overflow-y: auto;
            font-size: 0.8rem;
            color: var(--neon);
        }
        
        .stats-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid rgba(0, 255, 198, 0.2);
            text-align: center;
            flex: 1;
            min-width: 120px;
        }
        
        .stat-number {
            color: var(--neon);
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .stat-label {
            color: #9e9e9e;
            font-size: 0.8rem;
        }

        .sync-status {
            text-align: center;
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        
        .sync-success {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid var(--success);
            color: var(--success);
        }
        
        .sync-warning {
            background: rgba(255, 165, 0, 0.1);
            border: 1px solid var(--warning);
            color: var(--warning);
        }
    </style>
</head>
<body>

<!-- Background video -->
<video autoplay loop muted id="bgVid" class="bg-video">
    <source src="https://raw.githubusercontent.com/KIS566/hvideo/main/VN20251002_162055.mp4" type="video/mp4">
</video>

<!-- Auto Save Indicator -->
<div class="auto-save-indicator" id="autoSaveIndicator">
    <i class="fas fa-save"></i> Saving to Local Storage...
</div>

<header>
    <div class="logo">
        <i class="fas fa-lock"></i> Admin Panel
    </div>
    <a href="codes1.html" class="back-btn">
        <i class="fas fa-arrow-left"></i> Back to Codes
    </a>
</header>

<div class="wrap">
    <!-- Login Panel -->
    <div class="login-panel" id="loginPanel">
        <h2 class="panel-title">
            <i class="fas fa-lock"></i> Secure Admin Login
        </h2>
        
        <div class="security-info">
            <div class="security-icon">
                <i class="fas fa-shield-alt"></i>
            </div>
            <p style="margin: 0; color: var(--warning);">
                <strong>Protected Area</strong><br>
                Authorized access only
            </p>
        </div>
        
        <div class="form-group">
            <label class="form-label">
                <i class="fas fa-key"></i> Admin Password
            </label>
            <input type="password" class="form-input" id="adminPassword" placeholder="Enter admin password" autocomplete="off">
        </div>
        
        <button class="btn btn-primary" onclick="login()">
            <i class="fas fa-sign-in-alt"></i> Login
        </button>
        
        <div class="attempts-warning" id="attemptsWarning">
            Attempts remaining: <span id="attemptsCount">3</span>
        </div>
        
        <p style="color: #9e9e9e; margin-top: 15px; font-size: 0.8rem;">
            Default password: admin123
        </p>
    </div>
    
    <!-- Locked Panel -->
    <div class="login-panel hidden" id="lockedPanel">
        <div class="locked-message">
            <div class="lock-icon">
                <i class="fas fa-lock"></i>
            </div>
            <h2 style="color: var(--warning);">Account Temporarily Locked</h2>
            <p>Too many failed login attempts</p>
            <div class="countdown" id="countdown">
                Unlocks in: <span id="timer">30</span> seconds
            </div>
            <p style="font-size: 0.8rem; color: #9e9e9e;">
                Please wait or contact administrator
            </p>
        </div>
    </div>
    
    <!-- Admin Panel (Hidden until login) -->
    <div class="admin-panel hidden" id="adminPanel">
        <div style="position: relative;">
            <h2 class="panel-title">
                <i class="fas fa-cogs"></i> Admin Control Panel
            </h2>
            <button class="btn btn-warning logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
        
        <!-- Sync Status -->
        <div class="sync-status sync-success" id="syncStatus">
            <i class="fas fa-sync-alt"></i> Real-time Sync: Changes appear instantly in codes1.html
        </div>
        
        <div class="security-info">
            <div class="security-icon">
                <i class="fas fa-user-shield"></i>
            </div>
            <p style="margin: 0; color: var(--neon);">
                <strong>Local Storage Active</strong><br>
                Changes save automatically & appear instantly
            </p>
        </div>

        <!-- Statistics -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-number" id="totalCodesStat">0</div>
                <div class="stat-label">Total Codes</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="jsonSize">0 KB</div>
                <div class="stat-label">Data Size</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="lastSaved">Now</div>
                <div class="stat-label">Last Saved</div>
            </div>
        </div>
        
        <h3 style="color: var(--neon); margin: 20px 0 15px 0;">
            <i class="fas fa-plus-circle"></i> Add New Code
        </h3>
        
        <div class="form-group">
            <label class="form-label">Title</label>
            <input type="text" class="form-input" id="codeTitle" placeholder="Enter code title">
        </div>
        
        <div class="form-group">
            <label class="form-label">Description</label>
            <input type="text" class="form-input" id="codeDescription" placeholder="Enter code description">
        </div>
        
        <div class="form-group">
            <label class="form-label">Category</label>
            <select class="form-select" id="codeCategory">
                <option value="html">HTML</option>
                <option value="css">CSS</option>
                <option value="javascript">JavaScript</option>
                <option value="react">React</option>
                <option value="python">Python</option>
                <option value="other">Other</option>
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label">Code Content</label>
            <textarea class="form-textarea" id="codeContent" placeholder="Paste your code here"></textarea>
        </div>
        
        <div style="text-align: center;">
            <button class="btn btn-primary" onclick="addCode()">
                <i class="fas fa-save"></i> Add Code & Save
            </button>
            <button class="btn" onclick="clearForm()">
                <i class="fas fa-broom"></i> Clear Form
            </button>
            <button class="btn btn-success" onclick="exportJSON()">
                <i class="fas fa-download"></i> Export JSON
            </button>
        </div>

        <!-- JSON Preview -->
        <div style="margin-top: 20px;">
            <h4 style="color: var(--neon); margin-bottom: 10px;">
                <i class="fas fa-code"></i> JSON Preview (Local Storage)
            </h4>
            <div class="json-preview" id="jsonPreview">
                // JSON data will appear here
            </div>
        </div>
        
        <!-- Existing Codes -->
        <div class="codes-list" id="codesList">
            <h3 style="color: var(--neon); margin-top: 30px;">
                <i class="fas fa-list"></i> Existing Codes
                <span style="font-size: 0.8rem; background: rgba(0,255,198,0.2); padding: 2px 8px; border-radius: 10px;" id="codesCount">
                    0 codes
                </span>
            </h3>
            <div id="existingCodes">
                Loading...
            </div>
        </div>
    </div>
</div>

<!-- Notification -->
<div class="notification" id="notification"></div>

<script>
    // Security configuration
    const ADMIN_PASSWORD = "admin123";
    const MAX_LOGIN_ATTEMPTS = 3;
    const LOCKOUT_DURATION = 30; // seconds
    
    let isLoggedIn = false;
    let allCodes = [];
    let loginAttempts = 0;
    let isLocked = false;
    let lockoutTimer = null;
    
    // DOM elements
    const loginPanel = document.getElementById('loginPanel');
    const lockedPanel = document.getElementById('lockedPanel');
    const adminPanel = document.getElementById('adminPanel');
    const notification = document.getElementById('notification');
    const existingCodes = document.getElementById('existingCodes');
    const attemptsWarning = document.getElementById('attemptsWarning');
    const attemptsCount = document.getElementById('attemptsCount');
    const countdown = document.getElementById('countdown');
    const timer = document.getElementById('timer');
    const autoSaveIndicator = document.getElementById('autoSaveIndicator');
    const jsonPreview = document.getElementById('jsonPreview');
    const totalCodesStat = document.getElementById('totalCodesStat');
    const jsonSize = document.getElementById('jsonSize');
    const lastSaved = document.getElementById('lastSaved');
    const codesCount = document.getElementById('codesCount');
    const syncStatus = document.getElementById('syncStatus');

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
        // Check if account is locked
        const lockTime = localStorage.getItem('adminLockTime');
        if (lockTime && (Date.now() - parseInt(lockTime)) < (LOCKOUT_DURATION * 1000)) {
            showLockedPanel();
            startCountdown();
            return;
        }
        
        // Check if already logged in
        if (localStorage.getItem('adminLoggedIn') === 'true') {
            isLoggedIn = true;
            showAdminPanel();
        }
        
        // Load login attempts
        loginAttempts = parseInt(localStorage.getItem('loginAttempts') || '0');
        updateAttemptsDisplay();
        
        // Load existing codes from localStorage
        loadCodesFromLocalStorage();
    });
    
    // Load codes from localStorage
    function loadCodesFromLocalStorage() {
        try {
            const savedCodes = localStorage.getItem('codesData');
            if (savedCodes) {
                allCodes = JSON.parse(savedCodes);
                updateDisplay();
                showNotification('‚úÖ Codes loaded from Local Storage!', 'success');
            } else {
                allCodes = [];
                updateDisplay();
                showNotification('üìù No codes found. Add your first code!', 'info');
            }
        } catch (error) {
            console.error('Error loading codes:', error);
            allCodes = [];
            updateDisplay();
            showNotification('‚ùå Error loading codes from storage', 'error');
        }
    }
    
    // Login function with security features
    function login() {
        if (isLocked) {
            showNotification('Account is temporarily locked!', 'error');
            return;
        }
        
        const password = document.getElementById('adminPassword').value;
        
        if (password === ADMIN_PASSWORD) {
            // Successful login
            isLoggedIn = true;
            loginAttempts = 0;
            localStorage.setItem('adminLoggedIn', 'true');
            localStorage.setItem('loginAttempts', '0');
            localStorage.removeItem('adminLockTime');
            
            showAdminPanel();
            showNotification('üîì Login successful! Welcome Admin!', 'success');
            
        } else {
            // Failed login
            loginAttempts++;
            localStorage.setItem('loginAttempts', loginAttempts.toString());
            updateAttemptsDisplay();
            
            const remainingAttempts = MAX_LOGIN_ATTEMPTS - loginAttempts;
            
            if (remainingAttempts > 0) {
                showNotification(`‚ùå Invalid password! ${remainingAttempts} attempts remaining`, 'error');
                // Shake animation for wrong password
                document.getElementById('adminPassword').style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => {
                    document.getElementById('adminPassword').style.animation = '';
                }, 500);
            } else {
                // Lock the account
                isLocked = true;
                localStorage.setItem('adminLockTime', Date.now().toString());
                showLockedPanel();
                startCountdown();
                showNotification('üö´ Too many failed attempts! Account locked for 30 seconds.', 'error');
            }
            
            // Clear password field
            document.getElementById('adminPassword').value = '';
        }
    }
    
    // Show locked panel
    function showLockedPanel() {
        loginPanel.classList.add('hidden');
        lockedPanel.classList.remove('hidden');
        adminPanel.classList.add('hidden');
    }
    
    // Show admin panel
    function showAdminPanel() {
        loginPanel.classList.add('hidden');
        lockedPanel.classList.add('hidden');
        adminPanel.classList.remove('hidden');
        loadCodesFromLocalStorage();
    }
    
    // Start countdown for lockout
    function startCountdown() {
        const lockTime = parseInt(localStorage.getItem('adminLockTime'));
        const elapsed = Math.floor((Date.now() - lockTime) / 1000);
        let timeLeft = LOCKOUT_DURATION - elapsed;
        
        if (timeLeft <= 0) {
            unlockAccount();
            return;
        }
        
        timer.textContent = timeLeft;
        
        lockoutTimer = setInterval(() => {
            timeLeft--;
            timer.textContent = timeLeft;
            
            if (timeLeft <= 0) {
                clearInterval(lockoutTimer);
                unlockAccount();
            }
        }, 1000);
    }
    
    // Unlock account
    function unlockAccount() {
        isLocked = false;
        loginAttempts = 0;
        localStorage.removeItem('adminLockTime');
        localStorage.setItem('loginAttempts', '0');
        
        lockedPanel.classList.add('hidden');
        loginPanel.classList.remove('hidden');
        updateAttemptsDisplay();
        
        showNotification('üîì Account unlocked! You can try logging in again.', 'info');
    }
    
    // Update attempts display
    function updateAttemptsDisplay() {
        const remaining = MAX_LOGIN_ATTEMPTS - loginAttempts;
        attemptsCount.textContent = remaining;
        
        if (loginAttempts > 0) {
            attemptsWarning.style.display = 'block';
            
            if (remaining === 1) {
                attemptsWarning.style.color = 'var(--warning)';
            } else if (remaining === 0) {
                attemptsWarning.style.color = 'var(--danger)';
            }
        } else {
            attemptsWarning.style.display = 'none';
        }
    }
    
    // Logout function
    function logout() {
        if (confirm('Are you sure you want to logout?')) {
            isLoggedIn = false;
            localStorage.removeItem('adminLoggedIn');
            
            loginPanel.classList.remove('hidden');
            adminPanel.classList.add('hidden');
            lockedPanel.classList.add('hidden');
            
            // Clear form
            clearForm();
            
            showNotification('üëã Logged out successfully!', 'info');
        }
    }
    
    // Update all displays
    function updateDisplay() {
        displayExistingCodes();
        updateJSONPreview();
        updateStatistics();
    }
    
    // Display existing codes
    function displayExistingCodes() {
        if (allCodes.length === 0) {
            existingCodes.innerHTML = `
                <div style="text-align: center; padding: 20px; color: #9e9e9e;">
                    <i class="fas fa-inbox" style="font-size: 2rem; margin-bottom: 10px;"></i>
                    <p>No codes found in storage</p>
                    <p style="font-size: 0.8rem;">Add your first code using the form above</p>
                </div>
            `;
            return;
        }
        
        let html = '';
        allCodes.forEach((code, index) => {
            html += `
                <div class="code-item">
                    <div class="code-header">
                        <h4 class="code-title">
                            <i class="fas fa-${getCategoryIcon(code.category)}"></i> 
                            ${code.title}
                        </h4>
                        <span class="code-category">${code.category.toUpperCase()}</span>
                    </div>
                    <p style="color: #9e9e9e; margin-bottom: 10px;">${code.description}</p>
                    <div>
                        <button class="btn btn-danger" onclick="deleteCode(${index})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                        <button class="btn" onclick="editCode(${index})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                    </div>
                </div>
            `;
        });
        
        existingCodes.innerHTML = html;
    }
    
    // Update JSON preview
    function updateJSONPreview() {
        const jsonString = JSON.stringify(allCodes, null, 2);
        jsonPreview.textContent = jsonString;
        
        // Update codes count
        codesCount.textContent = `${allCodes.length} codes`;
    }
    
    // Update statistics
    function updateStatistics() {
        totalCodesStat.textContent = allCodes.length;
        
        // Calculate JSON size
        const jsonString = JSON.stringify(allCodes);
        const sizeInKB = (new Blob([jsonString]).size / 1024).toFixed(2);
        jsonSize.textContent = `${sizeInKB} KB`;
        
        // Update last saved time
        const now = new Date();
        lastSaved.textContent = now.toLocaleTimeString();
    }
    
    // Add new code with auto-save
    function addCode() {
        if (!isLoggedIn) {
            showNotification('Please login first!', 'error');
            return;
        }
        
        const title = document.getElementById('codeTitle').value;
        const description = document.getElementById('codeDescription').value;
        const category = document.getElementById('codeCategory').value;
        const content = document.getElementById('codeContent').value;
        
        if (!title || !content) {
            showNotification('‚ùå Title and content are required!', 'error');
            return;
        }
        
        const newCode = {
            title: title,
            description: description || 'No description provided.',
            category: category,
            content: content
        };
        
        // Add to array
        allCodes.unshift(newCode);
        
        // Auto-save to localStorage
        saveToLocalStorage();
        
        // Update display
        updateDisplay();
        
        // Clear form
        clearForm();
        
        showNotification('‚úÖ Code added & saved to Local Storage!', 'success');
    }
    
    // Save to localStorage
    function saveToLocalStorage() {
        showAutoSaveIndicator();
        
        try {
            localStorage.setItem('codesData', JSON.stringify(allCodes));
            console.log('‚úÖ Saved to localStorage:', allCodes);
            
            // Update sync status
            syncStatus.innerHTML = '<i class="fas fa-sync-alt"></i> Real-time Sync: Changes saved! Refresh codes1.html to see updates';
            
        } catch (error) {
            console.error('Error saving to localStorage:', error);
            showNotification('‚ùå Error saving codes!', 'error');
        }
    }
    
    // Show auto-save indicator
    function showAutoSaveIndicator() {
        autoSaveIndicator.style.display = 'block';
        setTimeout(() => {
            autoSaveIndicator.style.display = 'none';
        }, 2000);
    }
    
    // Export JSON file
    function exportJSON() {
        const jsonString = JSON.stringify(allCodes, null, 2);
        const blob = new Blob([jsonString], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'codes-data.json';
        a.click();
        URL.revokeObjectURL(url);
        
        showNotification('üì• JSON file exported!', 'success');
    }
    
    // Delete code
    function deleteCode(index) {
        if (!isLoggedIn) {
            showNotification('Please login first!', 'error');
            return;
        }
        
        if (confirm('Are you sure you want to delete this code?')) {
            const deletedCode = allCodes[index];
            allCodes.splice(index, 1);
            
            // Save after deletion
            saveToLocalStorage();
            
            // Update display
            updateDisplay();
            
            showNotification(`üóëÔ∏è Code "${deletedCode.title}" deleted!`, 'success');
        }
    }
    
    // Edit code
    function editCode(index) {
        const code = allCodes[index];
        
        // Fill form with existing data
        document.getElementById('codeTitle').value = code.title;
        document.getElementById('codeDescription').value = code.description;
        document.getElementById('codeCategory').value = code.category;
        document.getElementById('codeContent').value = code.content;
        
        // Change add button to update
        const addButton = document.querySelector('.btn-primary');
        addButton.innerHTML = '<i class="fas fa-sync-alt"></i> Update Code';
        addButton.onclick = function() { updateCode(index); };
        
        showNotification('‚úèÔ∏è Edit mode activated! Update the code below.', 'info');
    }
    
    // Update existing code
    function updateCode(index) {
        const title = document.getElementById('codeTitle').value;
        const description = document.getElementById('codeDescription').value;
        const category = document.getElementById('codeCategory').value;
        const content = document.getElementById('codeContent').value;
        
        if (!title || !content) {
            showNotification('‚ùå Title and content are required!', 'error');
            return;
        }
        
        allCodes[index] = {
            title: title,
            description: description || 'No description provided.',
            category: category,
            content: content
        };
        
        // Save changes
        saveToLocalStorage();
        
        // Update display
        updateDisplay();
        
        // Reset form and button
        clearForm();
        
        showNotification('‚úÖ Code updated & saved!', 'success');
    }
    
    // Clear form
    function clearForm() {
        document.getElementById('codeTitle').value = '';
        document.getElementById('codeDescription').value = '';
        document.getElementById('codeContent').value = '';
        document.getElementById('codeCategory').value = 'html';
        
        // Reset add button
        const addButton = document.querySelector('.btn-primary');
        addButton.innerHTML = '<i class="fas fa-save"></i> Add Code & Save';
        addButton.onclick = addCode;
    }
    
    // Show notification
    function showNotification(message, type = 'success') {
        notification.textContent = message;
        notification.style.display = 'block';
        
        if (type === 'error') {
            notification.style.background = '#ff5555';
        } else if (type === 'info') {
            notification.style.background = '#4fc3f7';
        } else {
            notification.style.background = 'var(--neon)';
        }
        
        setTimeout(() => {
            notification.style.display = 'none';
        }, 4000);
    }
    
    // Helper function to get category icon
    function getCategoryIcon(category) {
        const icons = {
            'html': 'html5',
            'css': 'css3-alt',
            'javascript': 'js',
            'react': 'react',
            'python': 'python',
            'other': 'code'
        };
        return icons[category] || 'code';
    }
</script>

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

</body>
</html>